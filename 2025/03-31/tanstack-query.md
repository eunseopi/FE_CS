# tanstack-query 에서 stale time 과 gc time 의 차이점

tanstack-query 에서 `staleTime`과 `gcTime`은 데이터를 캐싱하고 관리하는 데 중요한 두 가지 설정 값이다.

### `staleTime`

- **데이터가 얼마나 오래 '신선한 상태'로 유지되는지**를 정하는 시간

`staleTime`내에는 같은 쿼리에 대한 새로운 네트워크 요청이 일어나지 않고, 캐시 데이터를 그대로 사용하게 된다. 예를 들어서, `staleTime`을 5분으로 설정하면, 데이터를 가져오고 나서 5분 동안은 이 데이터가 '신선하다'고 판단해서 refetch가 트리거되더라도 추가 네트워크 요청 없이 캐시 데이터를 계속 사용한다. 그리고 'staleTime'이 지난 후 refetch가 트리거된다면 새로운 요청을 보내 데이터를 갱신하게 된다. `staleTime`의 기본값은 0이다.

### `gcTime`

- **해당 쿼리를 사용하는 곳이 없게 된 이후에도 캐시 데이터를 얼마 동안 유지할지**를 정하는 시간

`staleTIme`이 지나면 데이터는 '오래된' 상태가 되지만, 여전히 캐시된 데이터는 사용이 가능하다. 이 캐시 데이터는 새로운 요청을 보내 신선한 데이터를 받아오기 이전에 임시로 기존에 데이터를 표시하는 데 활용된다.
다만, 해당 쿼리가 사용되지 않게 되는 시점으로부터 `gcTime`으로 설정된 시간이 지나면 캐시에서 데이터가 삭제된다. 예를 들어서, `gcTime`을 10분으로 설정하면, 해당 쿼리르 사용하는 컴포넌트가 모두 언마운트된 시점으로부터 10분 후에 캐시에서 데이터가 삭제된다. tanstack-query에서 설정한 기본 `gcTime`은 5분이다.

이렇게 각각의 설정을 통해 데이터를 더 효율적으로 관리하고, 불필요한 네트워크 요청을 줄이면서도 최신 데이터를 가져올 수 있도록 한다.
